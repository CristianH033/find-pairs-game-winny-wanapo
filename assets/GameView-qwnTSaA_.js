import{d as w,o as a,c as u,r as v,a as i,u as c,I as A,b as K,e as V,w as x,T as E,f as t,t as m,g as P,_ as I,h as G,i as n,j as O,k as U,l as M,n as W,m as B,Q as N,p as J,q,F as H,s as X,v as R,x as j,y as S,z as Y,A as ee,B as T,C as te,D as se,E as ae,G as $}from"./index-DwrNgSry.js";const oe="/find-pairs-game-winny-wanapo/assets/crono-B7wSt1z4.svg",le="/find-pairs-game-winny-wanapo/assets/bottom-bear-BdGP2kR5.webp",ne={class:"transition h-auto text-xl shadow-md outline outline-4 outline-white bg-astronaut text-white rounded-full px-4 py-2 flex flex-row gap-2 justify-center items-center"},ie=w({__name:"Badge",setup(f){return(e,o)=>(a(),u("div",ne,[v(e.$slots,"left-icon",{},()=>[i(c(A),{class:"w-4 h-4 -rotate-45 text-laser"})]),v(e.$slots,"default"),v(e.$slots,"right-icon",{},()=>[i(c(A),{class:"w-4 h-4 rotate-45 text-laser"})])]))}}),re={class:"fixed z-10 top-0 left-0 w-full h-full flex flex-col justify-center items-center"},ce={class:"text-9xl",style:{"text-shadow":"0px 5px 10px #000000c7"}},ue=w({__name:"CountDown",props:{seconds:{default:10},secondsModifiers:{}},emits:["update:seconds"],setup(f){const e=K(f,"seconds"),{pause:o}=V(()=>{e.value--,e.value===0&&o()},1e3);return(d,p)=>(a(),u("div",re,[i(E,{name:"fade-zoom",mode:"out-in"},{default:x(()=>[e.value?(a(),u("div",{key:e.value,class:"text-seagull-50"},[t("span",ce,m(e.value),1)])):P("",!0)]),_:1})]))}}),de=I(ue,[["__scopeId","data-v-0671683e"]]),me=["src"],fe=w({__name:"GameTile",props:{tile:{}},setup(f){const e=f,o=G(),d=n(null),p=n(null),s=n(null),r=O(()=>e.tile.isRevealed||!o.gameStarted);return U(()=>e.tile.isMatched,l=>{if(l){const{variant:h}=B(d,{initial:{scale:1},enter:{scale:1.2,transition:{type:"spring",stiffness:350,damping:20,onComplete:()=>{h.value="default"}}},default:{scale:1,transition:{type:"spring",stiffness:350,damping:20}}})}}),(l,h)=>(a(),u("div",{class:"group",ref_key:"tileRef",ref:d},[t("button",{class:W(["active:!scale-90 duration-75 !transition-transform cursor-pointer w-20 h-20 xs:w-24 xs:h-24 group-even:bg-endeavour group-odd:bg-cerulean text-cerulean-50 rounded-md overflow-hidden outline outline-[6px] outline-seagull-50 shadow-[0px_5px_10px_8px_rgba(0,_51,_101,_0.75)]",{"outline-seagull-600":!e.tile.isMatched&&e.tile.isRevealed,"!outline-red-400":!e.tile.isMatched&&e.tile.isRevealed&&c(o).getTilesRevealedCount>1}])},[i(E,{name:"fade",mode:"out-in"},{default:x(()=>[r.value?(a(),u("img",{key:1,src:e.tile.image,class:"w-full h-full",ref_key:"image",ref:p},null,8,me)):(a(),M(N,{key:0,class:"m-6 fill-seagull-50",ref_key:"qLogoRef",ref:s},null,512))]),_:1})],2)],512))}}),pe=I(fe,[["__scopeId","data-v-e0bcc793"]]),_e={class:"w-full h-full max-w-[40rem] max-h-[30rem] xs:max-h-[35rem] sm:max-h-[38rem] md:max-h-[40rem] p-1 xs:p-4 sm:p-4 md:p-12"},ge=w({__name:"GameBoard",setup(f){const e=G(),o=n(null);return J(()=>{}),(d,p)=>{const s=q("motion");return a(),u("div",_e,[t("div",{class:"w-full h-full grid grid-cols-3 md:grid-cols-4 grid-rows-4 md:grid-rows-3 justify-items-center place-items-center gap-1 xs:gap-2 sm:gap-4 md:gap-12",ref_key:"boardElement",ref:o},[(a(!0),u(H,null,X(c(e).tiles,(r,l)=>R((a(),M(pe,{key:r.id,tile:r,onClick:h=>c(e).revealTile(r.id),initial:{y:100,opacity:0},enter:{y:0,opacity:1,transition:{type:"spring",stiffness:350,damping:20,delay:l*100}}},null,8,["tile","onClick","enter"])),[[s]])),128))],512)])}}}),xe={key:0,class:"w-full h-full fixed top-0 left-0 z-30 flex flex-col justify-center items-center"},he={class:"w-full h-full fixed top-0 left-0 bg-endeavour-600/50",initial:{opacity:0},enter:{opacity:1},leave:{opacity:0}},we={class:"w-full p-6"},ve={class:"text-3xl text-endeavour"},ye={class:"w-full p-6"},ke={class:"w-full p-6 flex flex-row justify-center items-center"},$e=w({__name:"ModalDialog",props:{isOpen:{type:Boolean,default:!1},title:{default:"Alerta"},message:{default:""},onConfirm:{type:Function,default:()=>{}},onCancel:{type:Function,default:()=>{}},confirmText:{default:"Aceptar"},cancelText:{default:"Cancelar"}},emits:["on:modalClose"],setup(f,{emit:e}){const o=e,d=n(null),p=()=>{o("on:modalClose")};return(s,r)=>{const l=q("motion");return s.isOpen?(a(),u("div",xe,[R(t("div",he,null,512),[[l]]),R((a(),u("div",{ref_key:"target",ref:d,class:"flex flex-col bg-seagull-200 rounded-2xl z-40 shadow-2xl max-w-lg w-full",initial:{opacity:0,scale:0},enter:{opacity:1,scale:1,transition:{delay:500,duration:500,type:"spring"}},leave:{opacity:0}},[t("div",we,[v(s.$slots,"header",{},()=>[t("h1",ve,m(s.title),1)])]),t("div",ye,[v(s.$slots,"content",{},()=>[t("p",null,m(s.message),1)])]),t("div",ke,[v(s.$slots,"actions",{close:p},()=>[i(S,{type:"button",onClick:p},{default:x(()=>[j(m(s.cancelText),1)]),_:1}),i(S,{type:"button",onClick:r[0]||(r[0]=h=>s.onConfirm())},{default:x(()=>[j(m(s.confirmText),1)]),_:1})])])])),[[l]])])):P("",!0)}}}),Ce={xmlns:"http://www.w3.org/2000/svg",class:"fill-spring-wood stroke-white stroke-[1rem]",viewBox:"0 0 424.291 312.031"},be=Y('<defs><clipPath clipPathUnits="userSpaceOnUse" id="a"><path d="M0 1920h1080V0H0Z" transform="translate(-991.01 -142.849)"></path></clipPath></defs><g clip-path="url(#a)" transform="matrix(1.33333 0 0 -1.33333 882.039 206.038)"><path d="M-352.41 31.152c.637 28.87-22.947 55.567-51.648 58.58-11.891 28.627-48.565 42.674-76.536 29.38-8.961.507-15.9 16.816-27.32 19.51-30.002 15.746-70.765 2.576-85.673-27.96-8.169-11.457-1.316-31.151-20.237-29.844-30.645-10.3-47.224-48.292-33.804-77.748 10.2-25.459 39.808-40.764 66.466-34.389 16.188-17.166 44.372-20.657 64.308-8.113 22.021-30.977 68.204-40.326 100.48-20.14 15.982 8.444 25.822 24.778 34.16 39.423 18.174 10.2 30.014 30.431 29.803 51.301z"></path></g><text x="50%" y="35%" class="fill-astronaut stroke-astronaut-50" dominant-baseline="middle" text-anchor="middle" font-size="5rem" stroke-width=".1rem"> Pares </text>',3),Te={x:"50%",y:"60%","alignment-baseline":"baseline",class:"fill-astronaut stroke-astronaut-50","dominant-baseline":"middle","text-anchor":"middle","font-size":"5rem","stroke-width":".1rem"},Be={class:"fill-laser stroke-laser-50"},Re={class:"fill-astronaut stroke-astronaut-50"},je=w({__name:"PairCounter",props:{pairCount:{},maxPairs:{}},setup(f){const e=f;return(o,d)=>(a(),u("svg",Ce,[be,t("text",Te,[t("tspan",Be,m(o.pairCount),1),t("tspan",Re,"/"+m(e.maxPairs),1)])]))}}),Se={class:"h-20 w-full flex flex-row justify-between gap-8 p-0"},Pe={class:"w-1/4 flex flex-row justify-start items-center"},Ge={class:"w-2/4 flex flex-row justify-center items-center grow"},Me=t("div",{class:"w-1/4 flex flex-row justify-end items-center"},[t("img",{src:se,class:"max-h-full max-w-full"})],-1),Le={class:"w-2/3 flex flex-row justify-start items-center"},ze=t("img",{src:oe,class:"w-8 h-8 scale-[3] origin-right"},null,-1),De={class:"flex-col"},Fe={class:"text-sm"},Ae={class:"text-sm"},Ve=t("div",{class:"w-1/3 flex flex-row justify-end items-center self-end"},[t("img",{src:le,class:"max-h-full max-w-full w-36"})],-1),Ie=w({__name:"GameView",setup(f){const e=G(),o=ae(),d=n(null),p=n(null),s=n(null),r=[d,p,s],l=n(!1),h=n(""),L=n(""),C=n(e.startGameCountDown.valueOf()),{count:y,dec:Q}=ee(e.getTimelimit),z=O(()=>e.getAttempts),{pause:D,resume:F}=V(()=>{Q()},1e3);D(),T(async()=>{await $(C).toBe(0),e.startGame(),F()}),T(async()=>{await $(z).toBe(e.getAttemptsLimit),k({title:"Juego Terminado",text:"Se acabaron tus intentos"})}),T(async()=>{await $(y).toBe(0),k({title:"Juego Terminado",text:"Se acabo el tiempo"})});const k=async(_={title:"Juego Terminado",text:"Fue un buen juego"})=>{D(),Z(),l.value=!0,h.value=_.title,L.value=_.text,await $(l).toBe(!1),o.push("/congrats")},Z=()=>{e.setCurrentGameStats({date:new Date,attempts:e.getAttempts,time:e.getTimelimit-y.value,pairsFound:e.getPairsFound})};return U(()=>e.getTilesUnmatched.length,_=>{_===0&&k({title:"Juego Terminado",text:"Felicitaciones has completado el juego"})}),te(async()=>{if(z.value<e.getAttemptsLimit&&y.value>0&&e.getTilesUnmatched.length>0)return!1;await await Promise.all([...r.map(_=>new Promise(g=>{B(_,{initial:{y:0,opacity:1},enter:{y:100,opacity:0,transition:{type:"spring",stiffness:350,damping:20,onComplete:()=>{g(!0)}}}})}))])}),J(()=>{e.gameStarted&&F(),e.gameStarted&&e.getTilesUnmatched.length===0&&k(),r.forEach((_,g)=>{B(_,{initial:{y:100,opacity:0},enter:{y:0,opacity:1,transition:{type:"spring",stiffness:350,damping:20,delay:g*150}}})})}),(_,g)=>(a(),u(H,null,[t("div",{class:"h-dvh w-full overflow-x-hidden overflow-y-hidden grid grid-cols-1 grid-rows-[auto_1fr_auto] justify-items-center place-items-center gap-2",ref_key:"headerRef",ref:d},[t("div",Se,[t("div",Pe,[i(N,{class:"fill-astronaut max-h-full max-w-full w-20 h-20"})]),t("div",Ge,[i(je,{class:"scale-125 origin-top max-h-full grow","pair-count":c(e).getPairsFound,"max-pairs":c(e).getMaxPosiblePairs},null,8,["pair-count","max-pairs"])]),Me]),t("div",{class:"w-full h-[0] min-h-full flex flex-col justify-center items-center",ref_key:"gameBoardRef",ref:p},[i(ge)],512),t("div",{class:"h-20 w-full flex flex-row justify-between gap-2 p-0",ref_key:"footerRef",ref:s},[t("div",Le,[i(ie,{class:"flex-row py-1 translate-x-[3rem]"},{"left-icon":x(()=>[ze]),default:x(()=>[t("div",De,[t("div",Fe,m(c(y))+" segundos",1),t("div",Ae," Intentos "+m(c(e).attempts)+" / "+m(c(e).getAttemptsLimit),1)])]),_:1})]),Ve],512)],512),c(e).gameStarted?P("",!0):(a(),M(de,{key:0,seconds:C.value,"onUpdate:seconds":g[0]||(g[0]=b=>C.value=b)},null,8,["seconds"])),i($e,{"is-open":l.value,title:h.value,message:L.value,"onOn:modalClose":g[1]||(g[1]=()=>l.value=!1)},{actions:x(({close:b})=>[i(S,{type:"button",onClick:b},{default:x(()=>[j("Aceptar")]),_:2},1032,["onClick"])]),_:1},8,["is-open","title","message"])],64))}});export{Ie as default};
